<!doctype html>
<html>
<body>
    <p>
        Строим системы троек Киркмана (STK) с n игроками m днями. Каждую будем представлять матрицей из m строк и n столбцов,
        в которой все столбцы дополнительно разделены на группы по 3
    </p>

    <p>
        По определению STK
        <br />а) в строке: каждое из чисел 0<= i < n встречается ровно один раз.
        <br />b) в матрице: каждая пара чисел (i,j) встречается ровно один раз в какой-то одной строке тройке столбцов
    </p>
    <p>
        Кодом матрицы назовем число, которое получается ее построчным прочтением.
        Две такие матрицы назвать эквивалентными, если одна из другой получается перенумерацией игроков, дней или троек внутри дня.
        Матрицу назовем канонической, если ее код лексикографически младший среди всех ей эквивалентных матриц.
    </p>
    <p>
        Следующие утверждения верны для любого числа n игроков любой каноноческой матрицы.
        <br />Утверждение 1: В каждой тройке, каждой строки номера игроков упорядочены по возрастанию:
        <br />a1  <  a2  <  a3
    </p>
    <p>
        <br />iDay:                         Condition:
        <br />any      player[iDay, 3*i] < player[iDay, 3*i+1] < player[iDay+3*i+2]  for any i
    </p>
    <p>
        <br />Утверждение 2:  Номера первых игроков в тройках  упорядочены по возрастанию:
        <br />(a1  a2  a3)    (b1  b2  b3)    (c1  c2  c3)
        <br />a1 < b1 < c1 ...
        <br />iDay:     PlayerPos:                        Condition:

        <br />any         i%3==0                      player[iDay, 3*i] < player[iDay, 3*(i+1)]
    </p>
    <p>

        <br />Утверждение 3: Первая строка имеет вид::
        0  1  2    3  4  5    6  7  8 ....   n-3 n-2 n-1
        <br />Утверждение 4: Первые три группы столбцов любой строки с номером 1 < j <= m имеет вид
        0  *  *    1  *  *    2  *  *
    </p>
    <p>
        iDay:        PlayerPos:            Condition:
        > 0             3*i, i <=2      player[iDay, 3*i] = i

    </p>
    <p>
        <br />Утверждение 5: Первые три группы столбцов любой строки 1 < j <= 3 имеет вид
        0  3  6    1  *  *    2  *  *
        0  4  *    1  *  *    2  *  *
        0  5  *    1  *  *    2  *  *
    </p>
    <p>
        iDay:    PlayerPos:   Player#:        Condition:
        1             1                  3             player[1, 1] = 3
        2                  6             player[1, 2] = 6
        2             1                  4             player[2, 1] = 4
        3             1                  5             player[2, 1] = 5
    </p>
    <p>
        <br />Утверждение 6: Номера игроков во втором столбце первой группы упорядочены по возрастанию
        1 < 3 < 4 < 5 < x1 < x2 < ...< xd, d = m-4  при этом  7 <= x1
        0    1
        0    3
        0    4
        0    5
        0 x1
        0 x2
        0 x3
        .              .                .
        .              .                .
        0 xd
    </p>
    iDay:                   Condition:
    >=4            player[iDay, 1] < player[iDay+1, 1]

    <br />Утверждение 7:   z1 < z2
    <br />0  1  2    3  4  5    6  7  8 ....
    <br />0  3  6    1 z1  *    2 z2  *

    <br />iDay:                Condition#:
    <br />1                pLayer[1, 4] < player[1, 7]  ???? dobavit' iz predudushhego


    <br />Утверждение 8:  Номер игрока 4 может находится только двух местах второй строки
    <br />(a):   0  3  6    1  4  *    2  *  *
    <br />(b):   0  3  6    1  *  *    2  *  *   4  *  *

    <br />iDay:                   Condition:
    <br /> 1                   player[1, 4] == 4 || player[1, 9] == 4

    <br />Утверждение 9:  При реализации случая (а) второй строки игрок 5 может стоять только в двух местах:
    <br />(a1):  0  3  6    1  4  *    2  5  *
    <br />(a2):  0  3  6    1  4  *    2  *  *   5  *  *

    <br />iDay:                   Condition:
    <br />1                   player[1, 4] == 4 &&  (player[1, 7] == 5 || player[1, 9]==5
    <br />а при реализации случая (b) второй строки номер игрока 5 может стоять только в одном месте:

    <br />(b1):  0  3  6    1  *  *    2  *  *   4  *  *    5  *  *

    <br />iDay:                   Condition:
    <br />1                   player[1, 4] >= 7 &&  (player[1, 9] == 4 && player[1, 12]==5)


    <br />Утверждение 10: При реализации случая (а1)  w1 < w2:
    <br />(a1):  0  3  6    1  4  w1    2  5  w2

    <br />iDay:                   Condition:
    <br />1                   player[1, 4] == 4 &&  player[1, 7] == 5 && player[1, 5] <   player[1, 8]

    <br />if player[1,4] <= 8 then player[1,8] <=11  && player[1,8] <=14   ???
    <br />if player[1,4] <= 8 then player[1,7] <=11  && player[1,7] <=14   ???

    <br />Следствие:  8 <= w2

    <br />Утверждение 11: При реализации случая (b1)  w1 < w2,   z1 < w1
    <br />(b1):  (0  3  6)    (1  z1  *)    (2  z2  *)   (4  w1  *)    (5  w2  *)

    <br />iDay:                   Condition:
    <br />1                   player[1, 4] >= 7 && player[1, 4]  < player[1, 13] && player[1, 13]  < player[1, 17]


    <br />Доказательство: Предположим, что z1 > w1. Тогда после перестановки  (0)  (3,6)  (1,4)   (2,5),  строка, переставленная как (b1), перейдет в строку
    <br />(b2):  (0  3  6)    (1  w1  *)    (2  w2  *)   (4  z1  *)    (5  z2  *)
    <br />которая лексикографически младше строки (b1)

    <br />Следствие:   10 < w2.
    <br />Доказательство:  Пусть w2=9, тогда z1 = 7, w1 = 8, строка (b1), имеющая вид
    <br />(b1):    (0  3  6)    (1  7  *)    (2  z2  *)   (4  8  *)    (5  9 *)  причем z2  > 10
    <br />после перестановки (0) (3, 6) (1 4) (2 5) (7 8) (9, z2) перейдет в строку
    <br />(b2):    (0  3  6)    (1  7  *)    (2  9  *)   (4  8  *)    (5  z2 *),
    <br />которая лексикографически младше строки (b1)


    <br />Утверждение 12: Если  игрок #4, в первый день стоит на 4 месте, то номер игрока, стоящего на 5-м месте, меньше, 
    чем номер, игрока стояшего над 5 в 0-й день

    <br />iDay:       Condition:
    1       if player[1,4]==4  ==> player[1,5] < player[0, {5}]
    Initial Result #0:
    "    0  1  2    3  4  5    6  7  8    9 10 11   12 13 14 \n"
    "    0  3  6    1  4 12    2  7  9    5 10 13    8 11 14 \n"
    0          1          2
    3          4                             5
    6                  7       8
    9                 10         11
    12         13         14
    (0  3  6)  (1  4  9)  (2  7 12)  (8 10 13)  (5 11 14)
</body>
</html>
